<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body id="body">

    <div id="container"></div>
    
    <script>

        // body

        const body = document.querySelector("#body");

        // container

        const container = document.querySelector("#container");

        // button

        const button = document.createElement("button");
        body.insertBefore(button, container);
        button.textContent = "Restart"

        button.addEventListener('click', function () {
            let grid;
            while (true) {
                grid = Number(prompt ("Enter number of squares per side (1-100)"));
                if (!isNaN(grid) && grid >= 1 && grid <= 100) {
                    break;
                } else {
                    alert("Please enter a valid number between 1 and 100");
                }
            }
            removeSquare();
            num = grid;
            createSquare();
        });

        // stack/square

        let num = 16;
        let randomNum = Math.floor(Math.random() * 256);

        function createSquare() {
            for (let i = 1; i <= num; i++) {
                const stack = document.createElement("div");
                stack.classList.add(`stack`);
                container.appendChild(stack);

                for (let j = 1; j <= num; j++) {
                const div = document.createElement("div");
                div.classList.add("square");
                stack.appendChild(div);
                }

            }

            const square = document.querySelectorAll(".square");

            square.forEach(square => {
                square.addEventListener('mouseenter', function () {
                    this.style.background = `rgb(${Math.floor(Math.random() * 256)}, ${Math.floor(Math.random() * 256)}, ${Math.floor(Math.random() * 256)})`;
                });
            });

            let opacity = 0;

            square.forEach(square => {
                square.addEventListener('mouseenter', function () {
                    document.querySelector("#container").style.background = `rgba(0, 0, 0, ${opacity+0.1})`;
                    opacity = opacity + 0.1;
                });
            });
        }

        function removeSquare() {
            container.textContent = '';
        }

        createSquare();
        
    </script>
</body>
</html>